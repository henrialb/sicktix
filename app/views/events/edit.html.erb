<%= render '../views/shared/forms/form_top'%>

  <%= simple_form_for(@event) do |f| %>

    <%# If first instance of Event_categories is invalid
    Most likely means user is creating event for the first time %>
    <% if @event.event_categories.first.valid? %>

      <h2>Event information</h2>
      <%= f.input :name, autofocus: true %>
      <%= f.association :venue, collection: Venue.all %>
      <%= f.input :starts_at %>
      <%= f.input :ends_at %>

    <% end %>

    <h2>Price categories</h2>
    <%= f.simple_fields_for :event_categories do |form| %>

      <div class="form-row">

          <div class="form-group col">
            <%= form.input :name, class: "form-control"%>
          </div>

          <div class="form-group col">
            <%= form.input :price, class: "form-control"%>
          </div>

          <div class="form-group col">
            <%= form.input :capacity, class: "form-control"%>
          </div>

          <div class="form-group col d-flex justify-content-around align-items-center">
            <%= link_to event_categories_path(form.object.id),
              method: :delete,
              data: { confirm: "Are you sure?" } do %>
                <i class="fas fa-trash-alt"></i>
            <% end %>
          </div>

        </div>

      <% end %>

    <%# TODO ==> JS ADD EVENT CATEGORY BUTTON HERE %>
    <%= f.submit :submit, class: 'btn-1' %>
  <% end %>

<%= render '../views/shared/forms/form_bottom'%>
